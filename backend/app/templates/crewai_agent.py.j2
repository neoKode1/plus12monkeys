"""{{ project_name }} â€” {{ template_name }}

{{ template_description }}

Generated by +12 Monkeys â€¢ Framework: CrewAI
"""

import os
from dotenv import load_dotenv
from crewai import Agent, Crew, Task, Process

load_dotenv()

# ---------------------------------------------------------------------------
# Agent Definitions
# ---------------------------------------------------------------------------
{% for agent in agents %}
{{ agent.role }}_agent = Agent(
    role="{{ agent.role }}",
    goal="{{ agent.goal }}",
    {% if agent.backstory %}backstory="{{ agent.backstory }}{% if agent.guidelines %}\n\n{{ agent.guidelines }}{% endif %}",{% elif agent.guidelines %}backstory="{{ agent.guidelines }}",{% endif %}
    verbose=True,
    allow_delegation=True,
    llm_model=os.getenv("LLM_MODEL", "claude-sonnet-4-20250514"),
)

{% endfor %}

# ---------------------------------------------------------------------------
# Task Definitions
# ---------------------------------------------------------------------------
{% for agent in agents %}
{{ agent.role }}_task = Task(
    description="Perform the {{ agent.role }} function: {{ agent.goal }}",
    expected_output="Structured result from the {{ agent.role }} agent",
    agent={{ agent.role }}_agent,
)

{% endfor %}

# ---------------------------------------------------------------------------
# Crew Assembly
# ---------------------------------------------------------------------------
crew = Crew(
    agents=[
        {% for agent in agents %}
        {{ agent.role }}_agent,
        {% endfor %}
    ],
    tasks=[
        {% for agent in agents %}
        {{ agent.role }}_task,
        {% endfor %}
    ],
    process=Process.sequential,
    verbose=True,
)


# ---------------------------------------------------------------------------
# Entry Point
# ---------------------------------------------------------------------------
def main():
    """Run the crew with a user-provided input."""
    import sys

    user_input = " ".join(sys.argv[1:]) if len(sys.argv) > 1 else "Hello, I need help."
    print(f"\nðŸš€ Starting {{ project_name }} crew...\n")
    result = crew.kickoff(inputs={"input": user_input})
    print(f"\nâœ… Result:\n{result}")


if __name__ == "__main__":
    main()

